/*!
 * 
 *  maishu-dilu v1.9.1
 *  https://github.com/ansiboy/dilu
 *  
 *  Copyright (c) 2016-2018, shu mai <ansiboy@163.com>
 *  Licensed under the MIT License.
 * 
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.dilu=t():e.dilu=t()}(window,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="./out-es5/index.js")}({"./out-es5/errors.js":
/*!***************************!*\
  !*** ./out-es5/errors.js ***!
  \***************************/
/*! no static exports found */function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.errors=void 0,t.errors={argumentNull:function(e){var t="Parameter ".concat(e," can not be null or empty.");return new Error(t)},elementValidateRuleNotSet:function(e){var t="元素'".concat(e.name,"'没有设置验证规则");return new Error(t)},fieldElementCanntNull:function(e){var t=null!=e?"The element value in the field cannt be null, field index is ".concat(e,"."):"The element in the field is null";return new Error(t)},elementNotExists:function(e){var t="Element ".concat(e," is not exits in the form.");return new Error(t)},fieldResultExpectBooleanType:function(e){var t="Result of ".concat(e," field is expected boolean.");return new Error(t)}}},"./out-es5/formValidator.js":
/*!**********************************!*\
  !*** ./out-es5/formValidator.js ***!
  \**********************************/
/*! no static exports found */function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function u(e){try{a(r.next(e))}catch(e){i(e)}}function l(e){try{a(r.throw(e))}catch(e){i(e)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(u,l)}a((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.FormValidator=void 0;var u=n(/*! ./errors */"./out-es5/errors.js"),l=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.validateOnChanged=!0,!t)throw u.errors.argumentNull("form");for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];this.fields=r||[],this.form=t,this.elementEvents={}}var t,n,l;return t=e,(n=[{key:"appendField",value:function(e){this.fields.push(e)}},{key:"clearErrors",value:function(){this.fields.map(function(e){return e.errorElement}).filter(function(e){return null!=e}).forEach(function(e){return e.style.display="none"})}},{key:"clearElementError",value:function(e){if(!e)throw u.errors.argumentNull("name");var t=this.fields.filter(function(t){return t.name==e}),n=!0,r=!1,o=void 0;try{for(var i,l=t[Symbol.iterator]();!(n=(i=l.next()).done);n=!0){var a=i.value;this.fieldErrorElement(a).style.display="none"}}catch(e){r=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw o}}}},{key:"setElementError",value:function(e,t){if(!e)throw u.errors.argumentNull("name");if(!t)throw u.errors.argumentNull("error");var n=this.fields.filter(function(t){return t.name==e}),r=!0,o=!1,i=void 0;try{for(var l,a=n[Symbol.iterator]();!(r=(l=a.next()).done);r=!0){var s=l.value,c=this.fieldErrorElement(s);c.style.removeProperty("display"),c.innerHTML=t}}catch(e){o=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}}},{key:"fieldElement",value:function(e){var t=e.name,n=this.form.querySelectorAll("[name='".concat(t,"']"))[0];if(null==n)throw u.errors.elementNotExists(t);return n}},{key:"fieldErrorElement",value:function(t){if(!t.errorElement){var n=this.form.getElementsByClassName("".concat(e.errorClassName," ").concat(t.name))[0];if(!n){var r=this.fieldElement(t);(n=document.createElement("span")).className=e.errorClassName,n.style.display="none",r.nextSibling?r.parentElement.insertBefore(n,r.nextSibling):r.parentElement.appendChild(n)}t.errorElement=n}return t.errorElement}},{key:"check",value:function(){for(var e=new Array,t=0;t<this.fields.length;t++){var n=this.fields[t],r=this.fieldElement(n);if(!n.condition||0!=n.condition(r)){var o=this.checkField(n);e.push(o)}}return 0==e.filter(function(e){return 0==e}).length}},{key:"checkAsync",value:function(){return i(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r,o,i,u,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=new Array,n=0;case 2:if(!(n<this.fields.length)){e.next=12;break}if(r=this.fields[n],o=this.fieldElement(r),!r.condition||0!=r.condition(o)){e.next=7;break}return e.abrupt("continue",9);case 7:i=this.checkFieldAsync(r),t.push(i);case 9:n++,e.next=2;break;case 12:return e.next=14,Promise.all(t);case 14:return u=e.sent,l=0==u.filter(function(e){return 0==e}).length,e.abrupt("return",l);case 17:case"end":return e.stop()}},e,this)}))}},{key:"bindElementEvent",value:function(e,t){var n=this;if(!this.elementEvents[e.name]){var r,o=this.fieldElement(e),i=(r=!1,function(){r||(r=!0,t?n.checkFieldAsync(e).then(function(){return r=!1}).catch(function(){return r=!1}):(n.checkField(e),r=!1))});if(this.validateOnChanged){o.addEventListener("change",i);var u=o.type||"text";if("text"==u||"password"==u)o.addEventListener("keyup",i);else if("radio"==u)for(var l=o.name,a=this.form.querySelectorAll("[name='".concat(l,"']")),s=0;s<a.length;s++)a[s]!=o&&a[s].addEventListener("change",i)}this.elementEvents[e.name]=!0}}},{key:"checkField",value:function(e){this.bindElementEvent(e,!1);for(var t=this.fieldElement(e),n=e.depends||[],o=0;o<n.length;o++){var i=n[o](t);if("object"==r(i))throw new Error("Please use checkAsync method.");if(!i)return!1}for(var l=0;l<e.rules.length;l++){var a=e.rules[l],s=this.fieldElement(e);if(null==s)throw u.errors.fieldElementCanntNull();var c=this.elementValue(s),f=a.validate(c);if("object"==r(f))throw new Error("Please use checkAsync method.");if(this.showElement(!f,e,a,s),!f)return!1}return!0}},{key:"checkFieldAsync",value:function(e){return i(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n,r,o,i,l,a,s,c,f,d;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.bindElementEvent(e,!0),n=this.fieldElement(e),r=e.depends||[],o=0;case 4:if(!(o<r.length)){t.next=15;break}return"boolean"==typeof(i=r[o](n))&&(i=Promise.resolve(i)),t.next=9,i;case 9:if(t.sent){t.next=12;break}return t.abrupt("return",!1);case 12:o++,t.next=4;break;case 15:l=0;case 16:if(!(l<e.rules.length)){t.next=33;break}if(a=e.rules[l],null!=(s=this.fieldElement(e))){t.next=21;break}throw u.errors.fieldElementCanntNull();case 21:return c=this.elementValue(s),"boolean"==typeof(f=a.validate(c))&&(f=Promise.resolve(f)),t.next=26,f;case 26:if(d=t.sent,this.showElement(!d,e,a,s),d){t.next=30;break}return t.abrupt("return",!1);case 30:l++,t.next=16;break;case 33:return t.abrupt("return",!0);case 34:case"end":return t.stop()}},t,this)}))}},{key:"showElement",value:function(e,t,n,r){var o=this.fieldErrorElement(t);if(console.assert(null!=o,"errorElement cannt be null."),null!=n.error){o=t.errorElement;var i=this.elementName(r),u="string"==typeof n.error?n.error:n.error()||"";o.innerHTML=u.replace("%s",i)}e?o.style.removeProperty("display"):o.style.display="none"}},{key:"checkElementAsync",value:function(e){var t=this.fields.filter(function(t){return t.name==e})[0];if(!t)throw u.errors.elementNotExists(e);return this.checkFieldAsync(t)}},{key:"checkElement",value:function(e){var t=this.fields.filter(function(t){return t.name==e})[0];if(!t)throw u.errors.elementNotExists(e);return this.checkField(t)}},{key:"elementValue",value:function(e){if("TEXTAREA"==e.tagName)return e.value;var t=e;if("radio"==t.type){for(var n=this.form.querySelectorAll("[name='".concat(t.name,"']")),r=0;r<n.length;r++)if(n[r].checked)return n[r].value;return""}return e.value}},{key:"elementName",value:function(e){return e.tagName,e.name}}])&&o(t.prototype,n),l&&o(t,l),e}();t.FormValidator=l,l.errorClassName="validationMessage"},"./out-es5/index.js":
/*!**************************!*\
  !*** ./out-es5/index.js ***!
  \**************************/
/*! no static exports found */function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rules=t.FormValidator=void 0;var r=n(/*! ./formValidator */"./out-es5/formValidator.js");Object.defineProperty(t,"FormValidator",{enumerable:!0,get:function(){return r.FormValidator}});var o=n(/*! ./rules */"./out-es5/rules.js");Object.defineProperty(t,"rules",{enumerable:!0,get:function(){return o.rules}}),n(/*! ./style */"./out-es5/style.js")},"./out-es5/rules.js":
/*!**************************!*\
  !*** ./out-es5/rules.js ***!
  \**************************/
/*! no static exports found */function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rules=void 0;var r=/^[0-9]+$/,o=/^\-?[0-9]*\.?[0-9]+$/,i=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,u=/^((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){3}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})$/i,l=/^((http|https):\/\/(\w+:{0,1}\w*@)?(\S+)|)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,a=/^1[34578]\d{9}$/,s=/\d{4}-\d{1,2}-\d{1,2}/,c="%s不能为空",f="%s与%s不匹配",d="%s和%s必须相同",m="%s至少包含%s个字符",h="The %s field must contain a number greater than %s.",v="The %s field must contain a number less than %s.",y="请数入数字",p="The %s field must contain a valid IP.",b="The %s field must contain a valid URL.",E="请输入正确的手机号码",g="请输入正确制";function k(e,t){return{validate:e,error:t}}function w(e){return"function"==typeof e?e():e}function x(e,t){var n;return(n="number"==typeof t?o.test(e)?parseFloat(e):null:"string"==typeof t?e:function(e){if(!e.match("today")&&!e.match(s))return null;var t,n=new Date;e.match("today")||(t=e.split("-"),n.setFullYear(t[0]),n.setMonth(t[1]-1),n.setDate(t[2]));return n}(e))<t?"lessThan":n>t?"greaterThan":"equal"}t.rules={required:function(e){return k(function(e){return""!=(e||"")},e||c)},matches:function(e,t){return k(function(t){return t==e.value},t||c)},email:function(e){return k(function(e){return i.test(e)},e||c)},minLength:function(e,t){return k(function(t){return(t||"").length>=w(e)},t||m)},maxLength:function(e,t){return k(function(t){return(t||"").length<=w(e)},t||f)},greaterThan:function(e,t){return k(function(t){return"greaterThan"==x(t,w(e))},t||h)},lessThan:function(e,t){return k(function(t){return"lessThan"==x(t,w(e))},t||v)},equal:function(e,t){return k(function(t){return"equal"==x(t,w(e))},t||d)},ip:function(e){return k(function(e){return u.test(e)},e||p)},url:function(e){return k(function(e){return l.test(e)},e||b)},mobile:function(e){return k(function(e){return a.test(e)},e||E)},numeric:function(e){return k(function(e){return r.test(e)},e||y)},custom:function(e,t){return k(e,t||g)}}},"./out-es5/style.js":
/*!**************************!*\
  !*** ./out-es5/style.js ***!
  \**************************/
/*! no static exports found */function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(/*! ./formValidator */"./out-es5/formValidator.js");if(!document.getElementById("maishu-dilu-style")&&null!=document.head){var o=document.createElement("style");o.type="text/css",o.id="maishu-dilu-style",document.head.appendChild(o),o.innerHTML="\n    .".concat(r.FormValidator.errorClassName," {\n        color: red;\n        font-weight: bold;\n    }\n    ")}}})});
//# sourceMappingURL=index.es5.min.js.map