/*!
 * ~
 *  maishu-toolkit v1.6.2
 *  https://github.com/ansiboy/toolkit
 *  
 *  Copyright (c) 2016-2018, shu mai <ansiboy@163.com>
 *  Licensed under the MIT License.
 * 
 */
!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var r=t();for(var n in r)("object"==typeof exports?exports:e)[n]=r[n]}}("undefined"==typeof window?global:window,(function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=2)}([function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.errors=t.Errors=void 0;var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,o;return t=e,(r=[{key:"argumentNull",value:function(e){var t=new Error("Argument ".concat(e," cannt be null or emtpy."));return t.name="argumentNull",t}},{key:"routeDataFieldNull",value:function(e){var t="The ".concat(e," field of route data cannt be null."),r=new Error(t);return r.name="routeDataFieldNull",r}},{key:"argumentFieldNull",value:function(e,t){var r="The ".concat(e," field of ").concat(t," cannt be null."),n=new Error(r);return n.name="argumentFieldNull",n}},{key:"argumentTypeIncorrect",value:function(e,t){var r="Argument ".concat(e," type error, expected type is ").concat(t,"."),n=new Error(r);return n.name="argumentTypeIncorrect",n}}])&&n(t.prototype,r),o&&n(t,o),e}();t.Errors=o;var u=new o;t.errors=u},function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.Callback=void 0;var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.funcs=new Array}var t,r,o;return t=e,o=[{key:"create",value:function(){return new e}}],(r=[{key:"add",value:function(e){this.funcs.push(e)}},{key:"remove",value:function(e){this.funcs=this.funcs.filter((function(t){return t!=e}))}},{key:"fire",value:function(e){this.funcs.forEach((function(t){return t(e)}))}}])&&n(t.prototype,r),o&&n(t,o),e}();t.Callback=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"guid",{enumerable:!0,get:function(){return n.guid}}),Object.defineProperty(t,"pathConcat",{enumerable:!0,get:function(){return o.pathConcat}}),Object.defineProperty(t,"Errors",{enumerable:!0,get:function(){return u.Errors}}),Object.defineProperty(t,"errors",{enumerable:!0,get:function(){return u.errors}}),Object.defineProperty(t,"Callback",{enumerable:!0,get:function(){return a.Callback}}),Object.defineProperty(t,"DataSource",{enumerable:!0,get:function(){return i.DataSource}}),Object.defineProperty(t,"DataSourceSelectArguments",{enumerable:!0,get:function(){return i.DataSourceSelectArguments}}),Object.defineProperty(t,"parseUrl",{enumerable:!0,get:function(){return c.parseUrl}}),Object.defineProperty(t,"deepEqual",{enumerable:!0,get:function(){return l.deepEqual}}),Object.defineProperty(t,"objectAssignDeep",{enumerable:!0,get:function(){return s.objectAssignDeep}}),Object.defineProperty(t,"formatDate",{enumerable:!0,get:function(){return f.formatDate}}),Object.defineProperty(t,"HTML",{enumerable:!0,get:function(){return y.HTML}}),Object.defineProperty(t,"ValueStore",{enumerable:!0,get:function(){return d.ValueStore}});var n=r(3),o=r(4),u=r(0),a=r(1),i=r(5),c=r(6),l=r(7),s=r(8),f=r(9),y=r(10),d=r(11)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.guid=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pathConcat=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(0==(t=t||[]).length)return"";if(1==t.length)return t[0];var n=t.join("/");return n=(n=(n=n.replace(/(\/+|\\+)/g,"/")).replace("http:/","http://")).replace("https:/","https://")}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DataSourceSelectArguments=t.DataSource=void 0;var n=r(0),o=r(1);function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=Object.assign(n.errors,{dataSourceCanntInsert:function(){return new Error("DataSource can not insert.")},dataSourceCanntDelete:function(){return new Error("DataSource can not delete.")},dataSourceCanntUpdate:function(){return new Error("DataSource can not update.")},primaryKeyNull:function(e){var t="Primary key named '".concat(e,"' value is null.");return new Error(t)},queryResultTypeError:function(){return new Error("Query result type error.")}}),c=function(){function e(t){u(this,e),this.inserting=new o.Callback,this.inserted=new o.Callback,this.deleting=new o.Callback,this.deleted=new o.Callback,this.updating=new o.Callback,this.updated=new o.Callback,this.selecting=new o.Callback,this.selected=new o.Callback,this.error=new o.Callback,this.args=t,this.primaryKeys=t.primaryKeys||[]}var t,r,n;return t=e,(r=[{key:"executeInsert",value:function(e,t){return this.args.insert(e,t)}},{key:"executeDelete",value:function(e,t){return this.args.delete(e,t)}},{key:"executeUpdate",value:function(e,t){return this.args.update(e,t)}},{key:"executeSelect",value:function(e){return e=e||{},this.args.select(e)}},{key:"insert",value:function(e,t,r){var n=this;if(!this.canInsert)throw i.dataSourceCanntInsert();if(!e)throw i.argumentNull("item");return"number"==typeof t&&(r=t,t=null),this.inserting.fire({sender:this,dataItem:e,index:r}),this.executeInsert(e,t).then((function(t){return Object.assign(e,t),n.inserted.fire({sender:n,dataItem:e,index:r}),t})).catch((function(e){throw n.processError(e,"insert"),e}))}},{key:"delete",value:function(e,t){var r=this;if(!this.canDelete)throw i.dataSourceCanntDelete();if(!e)throw i.argumentNull("item");return this.checkPrimaryKeys(e),this.deleting.fire({sender:this,dataItem:e}),this.executeDelete(e,t).then((function(t){return r.deleted.fire({sender:r,dataItem:e}),t})).catch((function(e){throw r.processError(e,"delete"),e}))}},{key:"update",value:function(e,t){var r=this;if(!this.canUpdate)throw i.dataSourceCanntUpdate();if(!e)throw i.argumentNull("item");return this.checkPrimaryKeys(e),this.updating.fire({sender:this,dataItem:e}),this.executeUpdate(e,t).then((function(t){return Object.assign(e,t),r.updated.fire({sender:r,dataItem:e}),t})).catch((function(e){throw r.processError(e,"update"),e}))}},{key:"isSameItem",value:function(e,t){if(null==e)throw i.argumentNull("theItem");if(null==t)throw i.argumentNull("otherItem");if(0==this.primaryKeys.length)return e==t;this.checkPrimaryKeys(e),this.checkPrimaryKeys(t);var r=!0,n=!1,o=void 0;try{for(var u,a=this.primaryKeys[Symbol.iterator]();!(r=(u=a.next()).done);r=!0){var c=u.value;if(e[c]!=t[c])return!1}}catch(e){n=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(n)throw o}}return!0}},{key:"checkPrimaryKeys",value:function(e){for(var t in e)if(null==e[t]&&this.primaryKeys.indexOf(t)>=0)throw i.primaryKeyNull(t)}},{key:"select",value:function(e){var t=this;return e=e||{},this.selecting.fire({sender:this,selectArguments:e}),this.executeSelect(e).then((function(r){var n,o;if(Array.isArray(r))n=r,o=r.length;else{if(void 0===r.dataItems||void 0===r.totalRowCount)throw i.queryResultTypeError();n=r.dataItems,o=r.totalRowCount}return t.selected.fire({sender:t,selectResult:{totalRowCount:o,dataItems:n},selectArguments:e}),{totalRowCount:o,dataItems:n}})).catch((function(e){throw t.processError(e,"select"),e}))}},{key:"processError",value:function(e,t){if(e.method=t,this.error.fire({sender:this,error:e}),!e.handled)throw e}},{key:"canDelete",get:function(){return null!=this.args.delete&&this.primaryKeys.length>0}},{key:"canInsert",get:function(){return null!=this.args.insert&&this.primaryKeys.length>0}},{key:"canUpdate",get:function(){return null!=this.args.update&&this.primaryKeys.length>0}}])&&a(t.prototype,r),n&&a(t,n),e}();t.DataSource=c;t.DataSourceSelectArguments=function e(){u(this,e),this.startRowIndex=0,this.maximumRows=2147483647}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseUrl=function(e){var t=e.indexOf("?");return t<0?{}:function(e){var t,r=/\+/g,n=/([^&=]+)=?([^&]*)/g,o=function(e){return decodeURIComponent(e.replace(r," "))},u={};for(;t=n.exec(e);)u[o(t[1])]=o(t[2]);return u}(e.substr(t+1))}},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.deepEqual=function e(t,r){if(t===r)return!0;if("object"==n(t)&&null!=t&&"object"==n(r)&&null!=r){if(Object.keys(t).length!=Object.keys(r).length)return!1;for(var o in t){if(!r.hasOwnProperty(o))return!1;if(!e(t[o],r[o]))return!1}return!0}return!1}},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){return null===e?"null":void 0===e?"undefined":"object"===n(e)?Array.isArray(e)?"array":"object":n(e)}function u(e){return"object"===o(e)?i(e):"array"===o(e)?a(e):e}function a(e){return e.map(u)}function i(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=u(e[r]));return t}function c(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r={arrayBehaviour:(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).arrayBehaviour||"replace"},n=t.map((function(e){return e||{}})),u=e||{},l=0;l<n.length;l++)for(var s=n[l],f=Object.keys(s),y=0;y<f.length;y++){var d=f[y],h=s[d],p=o(h),m=o(u[d]);if("object"===p)if("undefined"!==m){var v="object"===m?u[d]:{};u[d]=c({},[v,i(h)],r)}else u[d]=i(h);else if("array"===p)if("array"===m){var b=a(h);u[d]="merge"===r.arrayBehaviour?u[d].concat(b):b}else u[d]=a(h);else u[d]=h}return u}Object.defineProperty(t,"__esModule",{value:!0}),t.objectAssignDeep=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return c(e,r)},t.objectAssignDeepInto=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return c({},t)},t.withOptions=void 0;t.withOptions=function(e,t,r){return c(e,t,r)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formatDate=function(e,t){if("string"==typeof e)return e;var r=e;return t?"".concat(r.getFullYear(),"-").concat(r.getMonth(),"-").concat(r.getDate()," ").concat(r.getHours()+1,":").concat(r.getMinutes()):"".concat(r.getFullYear(),"-").concat(r.getMonth(),"-").concat(r.getDate())}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HTML=void 0;var n=r(0);function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,u;return t=e,u=[{key:"addClassName",value:function(e,t){if(null==e)throw n.errors.argumentNull("element");if(!t)throw n.errors.argumentNull("addonClassName");var r;if(r=(r="string"==typeof e?e:e.className)||"",console.assert(null!=t),r.indexOf(t)>=0)return r;var o="".concat(r," ").concat(t);return"string"!=typeof e&&(e.className=o),o}},{key:"removeClassName",value:function(e,t){var r;return(r="string"==typeof e?e:e.className||"").indexOf(t)<0?r:(r=(r=(r=r||"").replace(new RegExp(t,"g"),"")).trim(),"string"!=typeof e&&(e.className=r),r)}}],(r=null)&&o(t.prototype,r),u&&o(t,u),e}();t.HTML=u},function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.ValueStore=void 0;var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.items=new Array,this._value=t}var t,r,o;return t=e,(r=[{key:"attach",value:function(e,t){return void 0!==this.value&&e(this.value,t),this.add(e,t)}},{key:"add",value:function(e,t){return this.items.push({func:e,sender:t}),e}},{key:"remove",value:function(e){this.items=this.items.filter((function(t){return t.func!=e}))}},{key:"fire",value:function(e){this.items.forEach((function(t){return t.func(e,t.sender)}))}},{key:"value",get:function(){return void 0===this._value?null:this._value},set:function(e){this._value=e,this.fire(e)}}])&&n(t.prototype,r),o&&n(t,o),e}();t.ValueStore=o}])}));
//# sourceMappingURL=index.es5.min.js.map