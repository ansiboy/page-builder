{"version":3,"sources":["../out/value-store.js"],"names":["ValueStore","value","items","Array","_value","func","sender","undefined","add","push","filter","o","forEach","fire"],"mappings":";;;;;;;;;;;;;AAAA;;;IAGaA,U;;;AACT,sBAAYC,KAAZ,EAAmB;AAAA;;AACf,SAAKC,KAAL,GAAa,IAAIC,KAAJ,EAAb;AACA,SAAKC,MAAL,GAAcH,KAAd;AACH;;;;2BACMI,I,EAAMC,M,EAAQ;AACjB,UAAI,KAAKL,KAAL,KAAeM,SAAnB,EAA8B;AAC1BF,QAAAA,IAAI,CAAC,KAAKJ,KAAN,EAAaK,MAAb,CAAJ;AACH;;AACD,aAAO,KAAKE,GAAL,CAASH,IAAT,EAAeC,MAAf,CAAP;AACH;;;wBACGD,I,EAAMC,M,EAAQ;AACd,WAAKJ,KAAL,CAAWO,IAAX,CAAgB;AAAEJ,QAAAA,IAAI,EAAJA,IAAF;AAAQC,QAAAA,MAAM,EAANA;AAAR,OAAhB;AACA,aAAOD,IAAP;AACH;;;2BACMA,I,EAAM;AACT,WAAKH,KAAL,GAAa,KAAKA,KAAL,CAAWQ,MAAX,CAAkB,UAAAC,CAAC;AAAA,eAAIA,CAAC,CAACN,IAAF,IAAUA,IAAd;AAAA,OAAnB,CAAb;AACH;;;yBACIJ,K,EAAO;AACR,WAAKC,KAAL,CAAWU,OAAX,CAAmB,UAAAD,CAAC;AAAA,eAAIA,CAAC,CAACN,IAAF,CAAOJ,KAAP,EAAcU,CAAC,CAACL,MAAhB,CAAJ;AAAA,OAApB;AACH;;;wBACW;AACR,UAAI,KAAKF,MAAL,KAAgBG,SAApB,EACI,OAAO,IAAP;AACJ,aAAO,KAAKH,MAAZ;AACH,K;sBACSH,K,EAAO;AACb,WAAKG,MAAL,GAAcH,KAAd;AACA,WAAKY,IAAL,CAAUZ,KAAV;AACH","sourcesContent":["/**\r\n * 实现数据的存储，以及数据修改的通知\r\n */\r\nexport class ValueStore {\r\n    constructor(value) {\r\n        this.items = new Array();\r\n        this._value = value;\r\n    }\r\n    attach(func, sender) {\r\n        if (this.value !== undefined) {\r\n            func(this.value, sender);\r\n        }\r\n        return this.add(func, sender);\r\n    }\r\n    add(func, sender) {\r\n        this.items.push({ func, sender });\r\n        return func;\r\n    }\r\n    remove(func) {\r\n        this.items = this.items.filter(o => o.func != func);\r\n    }\r\n    fire(value) {\r\n        this.items.forEach(o => o.func(value, o.sender));\r\n    }\r\n    get value() {\r\n        if (this._value === undefined)\r\n            return null;\r\n        return this._value;\r\n    }\r\n    set value(value) {\r\n        this._value = value;\r\n        this.fire(value);\r\n    }\r\n}\r\n"],"file":"value-store.js"}